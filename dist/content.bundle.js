(()=>{var ae=Object.defineProperty;var h=(o,e)=>()=>(o&&(e=o(o=0)),e);var se=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),x=(o,e)=>{for(var n in e)ae(o,n,{get:e[n],enumerable:!0})};var L={};x(L,{criarNotificacao:()=>O});function O(){let o=new Date,e=String(o.getHours()).padStart(2,"0"),n=String(o.getMinutes()).padStart(2,"0"),t=document.createElement("div");t.innerHTML=`
    <div style="
      display: flex;
      align-items: center;
      gap: 10px;
    ">
      <span style="font-size:18px;">\u26A1</span>
      <span style="font-weight:500;">
        Extens\xE3o atualizada \xE0s ${e}:${n}
      </span>
    </div>
  `,t.style.position="fixed",t.style.bottom="20px",t.style.left="20px",t.style.padding="12px 18px",t.style.background="rgba(20,20,20,0.95)",t.style.color="white",t.style.borderRadius="12px",t.style.fontFamily="Arial, sans-serif",t.style.fontSize="14px",t.style.boxShadow="0 4px 12px rgba(0,0,0,0.5)",t.style.zIndex="99999",t.style.opacity="0",t.style.transition="opacity 0.5s ease",document.body.appendChild(t),console.log("Aviso da extens\xE3o."),setTimeout(()=>{t.style.opacity="1"},50),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),500)},5e3)}var M=h(()=>{O()});var j={};x(j,{mostrarRelatoriosAceitos:()=>z,relatoriosAceitosMonitores:()=>de});async function de(o){if(!o)return console.warn("NickMonitor n\xE3o informado."),null;let e=encodeURIComponent(`%${o}%`),n=ce.replace("%25",e);try{let t=await fetch(n,{method:"GET",headers:{apikey:D,Authorization:_,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${t.status} ${t.statusText}`);let s=await t.json();return s.length?(console.log("ID do primeiro resultado:",s[0].id),await z(s[0].id),s[0].id):(console.log("Nenhum resultado encontrado para:",o),null)}catch(t){return console.error("Erro ao buscar dados:",t),null}}async function z(o){if(!o){console.warn("memberId n\xE3o informado.");return}let e=document.querySelector("#relatoriosAceitos");if(!e){console.warn("Div #relatoriosAceitos n\xE3o encontrada.");return}e.innerHTML="";let n=le+o;try{let t=await fetch(n,{method:"GET",headers:{apikey:D,Authorization:_,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${t.status} ${t.statusText}`);let s=await t.json();if(!s.length){e.innerHTML="<p>Nenhum relat\xF3rio encontrado.</p>";return}let a=new Date,r=new Date;r.setDate(a.getDate()-2);let l=s.filter(c=>{if(!c.created_at||c.accepted!==!0&&c.accepted!==!1)return!1;let i=new Date(c.created_at);return i>=r&&i<=a});if(!l.length){e.innerHTML="<p>Nenhum relat\xF3rio recente encontrado.</p>";return}l.forEach(c=>{let i=document.createElement("div");i.style.border="1px solid #282828",i.style.padding="8px",i.style.marginBottom="10px",i.style.borderRadius="5px";let u=c.accepted?"Aprovado":"Reprovado",d=c.accepted?" #34d399":" #ef4444",p="Sem data";c.created_at&&(p=new Date(c.created_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}));let m=`
        <p style="display: flex; justify-content: space-between">
          <span>${c.report_model?.name??"N/A"} - ${p}</span>
          <span style="color:${d};">${u}</span>
        </p>

        <p style="color: #a1a1aa; display: flex; justify-content: space-between">
          <span>${c.member?.nickname??"N/A"}</span>
          <span>Aceito por ${c.accepted_by?.nickname??"N/A"}</span>
        </p>
      `;c.reason&&c.reason.trim()!==""&&(m+=`<p style="color: #a1a1aa;">Motivo: ${c.reason}</p>`),m+=`<p style="margin-top: 3px;">${c.report??"N/A"}</p>`,i.innerHTML=m,e.appendChild(i)})}catch(t){console.error("Erro ao buscar relat\xF3rios aceitos:",t),e.innerHTML='<p style="color:red;">Erro ao carregar os relat\xF3rios.</p>'}}var ce,le,D,_,N=h(()=>{ce="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",le="https://supabase.exbrhabbo.com/rest/v1/clusters_reports?select=*,member:enrollments!clusters_reports_member_fkey(id,nickname),report_model:cluster_report_models(*),accepted_by:enrollments!clusters_reports_accepted_by_fkey(id,nickname)&order=created_at.desc&or=(accepted.eq.true,accepted.eq.false,accepted.is.null)&cluster=eq.e34ee431-8e67-456d-8216-fce1b8a9a60b&member=eq.",D="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",_="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var R={};x(R,{relatoriosTreinadores:()=>fe});async function me(o){let e=ue+o;try{let n=await fetch(e,{method:"GET",headers:{apikey:J,Authorization:$,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Erro ao buscar relat\xF3rios: ${n.status} ${n.statusText}`);let t=await n.json();console.log("Relat\xF3rios encontrados:",t);let s=document.querySelector("#informacoes-relatorios > div"),a=document.querySelector("#relatorios");return a&&a.remove(),a=document.createElement("div"),a.id="relatorios",a.style.display="flex",a.style.flexDirection="column",a.style.flexWrap="nowrap",a.style.gap="5px",s.appendChild(a),t.forEach((r,l)=>{let c="";r.error&&(c+=' <span style="color:#ef4444;">(Erro)</span>'),r.trainee_report&&(c+=' <span style="color:#fbbf24;">(Teste)</span>');let i=r.accepted_by!==null,u=i?`aceito por ${r.accepted_by.nickname}${c}`:"Pendente",d=document.createElement("div");d.className="border px-2",d.setAttribute("data-state","closed"),d.setAttribute("data-orientation","vertical"),d.innerHTML=`
        <h3 data-orientation="vertical" data-state="closed" class="flex">
          <button type="button" aria-controls="radix-${l}" aria-expanded="false" data-state="closed" data-orientation="vertical"
            class="flex flex-1 items-center justify-between text-sm font-medium transition-all hover:underline py-2" data-radix-collection-item="">
            <span>
              ${r.type?.name||"Tipo inv\xE1lido"}
              <span class="ml-2 text-muted-foreground">${u}</span>
            </span>
            <span class="ml-auto mr-2 block size-2 rounded-full" id="bolinha-${l}"></span>
            <svg width="15" height="15" viewBox="0 0 15 15" fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="size-4 shrink-0 text-muted-foreground transition-transform duration-200">
              <path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z"
                fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
            </svg>
          </button>
        </h3>
        <div id="radix-${l}" class="pb-4 pt-0 relative space-y-2" hidden>
          <div>
            <p style="display: flex; justify-content: space-between;">
              <span class="text-sm text-muted-foreground">Respons\xE1vel: ${r.responsible?.nickname||"Desconhecido"}</span>
              <span class="text-sm text-muted-foreground">Treinador: ${r.secondary?.nickname||"Desconhecido"}</span>
            </p>
          </div>
          <div>
            <p class="text-sm text-muted-foreground">Data de cria\xE7\xE3o: ${r.created_at?new Date(r.created_at).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}</p>
          </div>
          <p class="text-sm text-muted-foreground">Treinados: ${r.students?.join(", ")||"N/A"}</p>

          <section class="space-y-3 rounded border px-1 py-2">
            <h3 class="font-semibold leading-none tracking-tight">Reprovados</h3>
            ${(r.failed&&r.failed.length>0?r.failed:[{}]).map(v=>`
                <div>
                  <p class="text-sm text-muted-foreground">Nickname: ${v.student||""}</p>
                  <p class="text-sm text-muted-foreground">Motivo: ${v.reason||""}</p>
                </div>
              `).join("")}
          </section>

          <p class="text-sm text-muted-foreground">Aprovados: ${r.approveds?.join(", ")||"N/A"}</p>
        </div>
      `,a.appendChild(d);let p=document.getElementById(`bolinha-${l}`);p.style.width="6pxpx",p.style.height="6pxpx",p.style.borderRadius="50%",p.style.backgroundColor=i?" #34d399":" #fbbf24";let m=d.querySelector("button"),y=d.querySelector(`#radix-${l}`);m.addEventListener("click",()=>{a.querySelectorAll("div[data-state]").forEach(w=>{w!==d&&(w.setAttribute("data-state","closed"),w.querySelector(`#radix-${Array.from(a.children).indexOf(w)}`).hidden=!0)});let v=y.hidden;y.hidden=!v,d.setAttribute("data-state",v?"open":"closed")})}),t}catch(n){console.error("Erro ao buscar relat\xF3rios:",n)}}async function fe(o){if(!o)return console.warn("Nick do treinador n\xE3o encontrado."),null;let e=encodeURIComponent(`%${o}%`),n=pe.replace("%25",e);try{let t=await fetch(n,{method:"GET",headers:{apikey:J,Authorization:$,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${t.status} ${t.statusText}`);let s=await t.json();if(!s.length)return console.log("Nenhum resultado encontrado para:",o),null;let a=s[0].id;return console.log("ID do treinador:",a),await me(a),a}catch(t){return console.error("Erro ao buscar dados:",t),null}}var pe,ue,J,$,q=h(()=>{pe="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",ue="https://supabase.exbrhabbo.com/rest/v1/reports?select=*%2Chandler%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Csecondary%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Cresponsible%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Cbranch%3Abranches%28*%29%2Ctype%3Areport_types%28*%29%2Caccepted_by%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29&order=created_at.desc&offset=0&limit=25&branch=eq.895039c4-2473-494c-b293-5506e1d8152c&handler=eq.",J="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",$="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var B={};x(B,{centralDeAcoes:()=>be});async function be(){document.addEventListener("click",o=>{let e=o.target.closest("body > div > section > main > section > main > div > div.p-6.pt-0 > section > section > div.space-y-4 > div > div > button");if(!e)return;let t=document.querySelector("body > div.fixed.inset-0.z-50.bg-black\\/80[data-state='open']")?.nextElementSibling;if(!t){console.warn("Container da modal n\xE3o encontrado.");return}t.style.overflowY="hidden";let s=t.querySelector("button > svg");if(s?(s.style.position="absolute",s.style.right="-35px"):console.log("Bot\xE3o SVG n\xE3o encontrado dentro do container"),t.dataset.modificado==="true")return;t.dataset.modificado="true";let a=window.getComputedStyle(t);(a.position==="static"||!a.position)&&(t.style.position="relative");let r=document.querySelector("#informacoes-relatorios");r||(r=document.createElement("div"),r.id="informacoes-relatorios",r.style.width="62%",r.style.overflowY="scroll",r.style.scrollbarWidth="none",r.style.msOverflowStyle="none",r.style.height="232px",t.appendChild(r)),r.innerHTML="";let l=document.createElement("div"),c=t.querySelector("textarea");c&&(c.style.width="unset"),l.style.width="100%",l.style.height="200px",r.appendChild(l);let i=document.querySelector("#relatoriosAceitos");if(i)i.isConnected||t.appendChild(i);else{i=document.createElement("div"),i.id="relatoriosAceitos",i.style.width="35%",i.style.height="438.9px",i.style.position="absolute",i.style.top="0",i.style.right="0",i.style.overflowY="scroll",i.style.scrollbarWidth="none",i.style.msOverflowStyle="none",i.style.padding="10px",i.style.boxSizing="border-box",i.style.zIndex="9999",i.innerHTML='<p style="font-size: 14px; font-weight: 400; text-align: center;">A\xE7\xF5es aceitas</p>';let p=document.createElement("style");p.textContent=`
        #relatoriosAceitos::-webkit-scrollbar {
          display: none;
        }
      `,document.head.appendChild(p)}i.parentElement!==t&&t.appendChild(i),Array.from(t.children).filter(p=>p!==r&&p!==i).forEach(p=>{p.style.marginRight="38%"}),t.style.setProperty("width","95vw","important"),t.style.setProperty("max-width","none","important"),t.style.setProperty("outline","none","important");let d=t.querySelector("p");d&&d.style.setProperty("font-size","15px"),xe(e)})}function xe(o){let e=o.closest("div.space-y-4 > div");if(!e)return;let n=Array.from(e.querySelectorAll("p")).find(r=>r.textContent.includes("Criado por"));if(!n)return;let t=n.textContent.trim(),s="Criado por ",a=t.includes(s)?t.substring(t.indexOf(s)+s.length).trim():null;console.log("Nick encontrado:",a),ye.then(r=>r.relatoriosAceitosMonitores(a)).catch(console.error),he.then(r=>r.relatoriosTreinadores(a)).catch(console.error)}var ye,he,P=h(()=>{ye=Promise.resolve().then(()=>(N(),j)),he=Promise.resolve().then(()=>(q(),R))});var X,Y,I,S,W=h(()=>{X="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",Y="https://supabase.exbrhabbo.com/rest/v1/clusters_reports?select=*,member:enrollments!clusters_reports_member_fkey(id,nickname),report_model:cluster_report_models(*),accepted_by:enrollments!clusters_reports_accepted_by_fkey(id,nickname)&order=created_at.desc&accepted=is.true&cluster=eq.e34ee431-8e67-456d-8216-fce1b8a9a60b&member=eq.",I="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",S="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var te={};x(te,{exibirMenuMonitores:()=>K});async function K(){console.log("Lista de membros.");let o=document.querySelector("body > div > section > main > section > main > div > div.p-6.pt-0 > div > div.items-center.justify-between.space-y-2.lg\\:flex.lg\\:space-y-0 > div.flex.flex-1.flex-wrap.items-center.gap-2");if(o&&(o.style.justifyContent="space-between",!document.getElementById("identificador-datas"))){let e=document.createElement("div");e.id="identificador-datas",e.style.display="flex",e.style.alignItems="center",e.style.gap="12px",e.style.padding="0px 14px",e.style.borderRadius="6px",e.style.border="1px solid rgb(38 38 38)",e.style.fontSize="10px",e.style.color="rgb(161, 161, 161)",e.style.backgroundColor="#1e1e1e";let n=document.createElement("span");n.textContent="Data para fechamento:";let t=document.createElement("select");t.id="dia-fechamento",Object.assign(t.style,{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#1e1e1e",color:"white",fontWeight:"500",cursor:"pointer",minWidth:"60px"});let s=new Date,a=s.getFullYear(),r=s.getMonth(),l=new Date(a,r+1,0).getDate();for(let d=1;d<=l;d++){let p=document.createElement("option");p.value=d,p.textContent=d.toString().padStart(2,"0"),t.appendChild(p)}let c=localStorage.getItem("diaSelecionado");c?(t.value=c,b=c):b=t.value;let i=document.createElement("div");i.style.display="flex",i.style.alignItems="center";let u=document.createElement("button");u.title="Buscar",Object.assign(u.style,{cursor:"pointer",border:"none",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px",borderRadius:"4px",color:"rgb(161, 161, 161)",transition:"color 0.2s ease-in-out"}),u.onmouseenter=()=>u.style.color="white",u.onmouseleave=()=>u.style.color="rgb(161, 161, 161)",u.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          viewBox="0 0 24 24">
          <line x1="5" y1="12" x2="19" y2="12" />
          <polyline points="12 5 19 12 12 19" />
        </svg>
      `,u.onclick=()=>{let d=t.value;localStorage.setItem("diaSelecionado",d),b=d,localStorage.setItem("lupasAtivadas","true"),F=!0,ge(),U(),E&&E.disconnect(),H()},t.addEventListener("change",()=>{let d=t.value;localStorage.setItem("diaSelecionado",d),b=d}),i.appendChild(u),e.appendChild(n),e.appendChild(t),e.appendChild(i),o.appendChild(e),F&&(U(),H())}}function ge(){document.querySelectorAll("td.td-lupa-monitores").forEach(o=>o.remove())}function Z(o){f||(f=document.createElement("div"),f.id="div-flutuante-monitores",Object.assign(f.style,{position:"fixed",left:"50%",bottom:"3px",transform:"translate(-50%, -10%)",borderRadius:"6px",border:"1px solid rgb(38 38 38)",width:"98vw",backgroundColor:"rgb(0 0 0 / 60%)",color:"white",borderTop:"2px solid rgb(38 38 38)",padding:"12px",boxSizing:"border-box",overflowY:"auto",zIndex:9999,display:"flex",flexDirection:"row",gap:"20px",flexWrap:"wrap"}),document.body.appendChild(f)),f.innerHTML="";let e=document.createElement("button");e.id="fechar-div-flutuante",e.textContent="\xD7",Object.assign(e.style,{position:"absolute",top:"8px",right:"16px",background:"transparent",border:"none",color:"white",fontSize:"24px",cursor:"pointer",fontWeight:"bold",lineHeight:"1"}),e.onclick=()=>{f.style.display="none"},f.appendChild(e),f.innerHTML+=o,f.style.display="flex"}function U(){if(!b)return;let o=e=>{let n=e.parentElement;if(!n)return;let t=e.nextElementSibling;if(t&&t.classList.contains("td-lupa-monitores"))return;let s=document.createElement("td");s.className="td-lupa-monitores",Object.assign(s.style,{width:"32px",textAlign:"center",verticalAlign:"middle",cursor:"pointer",padding:"4px"}),s.title=`A\xE7\xE3o com dia ${b}`,s.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          viewBox="0 0 24 24">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      `,s.addEventListener("click",async a=>{a.stopPropagation();let c=a.target.closest("tr")?.querySelector("td:nth-child(2)")?.textContent.trim();if(!c)return;let i=await V(c),u=await Q(i),d=ee(c,u);Z(d)}),n.insertBefore(s,t||null)};document.querySelectorAll("table").forEach(e=>{e.querySelectorAll("tbody tr td:nth-child(4)").forEach(o)})}function H(){E=new MutationObserver(o=>{for(let e of o)e.addedNodes.forEach(n=>{if(n.nodeType===1&&n.matches("tr")){let t=n.querySelector("td:nth-child(4)");if(t){let s=t.nextElementSibling;if(s&&s.classList.contains("td-lupa-monitores"))return;let a=document.createElement("td");a.className="td-lupa-monitores",Object.assign(a.style,{width:"32px",textAlign:"center",verticalAlign:"middle",cursor:"pointer",padding:"4px"}),a.title=`A\xE7\xE3o com dia ${b}`,a.innerHTML=`
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              `,a.addEventListener("click",async r=>{r.stopPropagation();let i=r.target.closest("tr")?.querySelector("td:nth-child(2)")?.textContent.trim();if(!i)return;let u=await V(i),d=await Q(u),p=ee(i,d);Z(p)}),t.parentElement.insertBefore(a,s||null)}}})}),document.querySelectorAll("table").forEach(o=>{E.observe(o,{childList:!0,subtree:!0})})}async function V(o){let e=`${X}${encodeURIComponent(o)}%25`,t=await(await fetch(e,{method:"GET",headers:{apikey:I,Authorization:S,"Content-Type":"application/json"}})).json();if(!t?.length)throw new Error("Membro n\xE3o encontrado");return t[0].id}async function Q(o){let e=localStorage.getItem("diaSelecionado"),n=new Date().getFullYear(),t=String(new Date().getMonth()+1).padStart(2,"0"),a=new Date(`${n}-${t}-${e.padStart(2,"0")}T03:00:00Z`).toISOString(),r=new Date,c=new Date(r.getFullYear(),r.getMonth(),r.getDate(),3,0,0).toISOString(),i=`${Y}${o}&offset=0`;e&&(i+=`&created_at=gte.${a}&created_at=lte.${c}`);let d=await(await fetch(i,{method:"GET",headers:{apikey:I,Authorization:S,"Content-Type":"application/json"}})).json(),p={T1:[],T2:[],T3:[],T4:[],TOTAL:[]};return d.forEach(m=>{let y=m?.report_model?.name;y==="Treinamento B\xE1sico I"?p.T1.push(m):y==="Treinamento B\xE1sico II"?p.T2.push(m):y==="Treinamento Complementar I"?p.T3.push(m):y==="Treinamento Complementar II"&&p.T4.push(m),p.TOTAL.push(m)}),p}function ee(o,e){let n=`<h2>Relat\xF3rios de <strong>${o}</strong></h2>`;for(let t in e){let s=e[t];n+=`<div><strong>${t}</strong>: ${s.length}</div>`}return n+="</div>",n}function G(){if(!g||!C)return;let o=Array.from(g.querySelectorAll("tr")),e=[...o].sort((t,s)=>{let a=t.querySelector("td:nth-child(4) div")?.textContent.trim()||"",r=s.querySelector("td:nth-child(4) div")?.textContent.trim()||"",l=A[a]!==void 0?A[a]:1/0,c=A[r]!==void 0?A[r]:1/0;return l-c}),n=!1;for(let t=0;t<o.length;t++)if(o[t]!==e[t]){n=!0;break}n&&(C.disconnect(),e.forEach(t=>g.appendChild(t)),C.observe(g,{childList:!0,subtree:!1}))}var b,E,f,F,ve,A,T,g,C,oe=h(()=>{W();b=null,E=null,f=null,F=localStorage.getItem("lupasAtivadas")==="true";ve=new MutationObserver(()=>{document.querySelector("body > div > section > main > section > main > div > div.p-6.pt-0 > div > div.items-center.justify-between.space-y-2.lg\\:flex.lg\\:space-y-0 > div.flex.flex-1.flex-wrap.items-center.gap-2")&&!document.getElementById("identificador-datas")&&K()});ve.observe(document.body,{childList:!0,subtree:!0});document.body.style.paddingBottom="60px";A={Ativo:0,"Semi-Ausente":1,Ausente:2,"Justificativa de Aus\xEAncia":3,Verifica\u00E7\u00E3o:4},T=null,g=document.querySelector("tbody"),C=null;g&&(C=new MutationObserver(o=>{T&&clearTimeout(T),T=setTimeout(()=>{G()},100)}),C.observe(g,{childList:!0,subtree:!1}),G())});var re={};x(re,{verificarERodarModulo:()=>ne});function ne(){let o=window.location.href,e=we.filter(n=>o.startsWith(n.url)).sort((n,t)=>t.url.length-n.url.length)[0];e?(e.modulo(),console.log("\u2705 Rota encontrada:",e.url),e.aviso&&(Ae(e.aviso),Ce.then(n=>n.criarNotificacao()).catch(console.error))):console.log("\u26A0 Nenhum m\xF3dulo configurado para esta URL:",o)}function Ae(o){let e=document.querySelector("#aviso-suspenso-container");e||(e=document.createElement("div"),e.id="aviso-suspenso-container",Object.assign(e.style,{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",fontFamily:"Arial, sans-serif"}),document.body.appendChild(e)),e.innerHTML="";let n=document.createElement("div");n.textContent=o,n.style.padding="12px 18px",n.style.background="rgba(20,20,20,0.95)",n.style.color="white",n.style.borderRadius="12px",n.style.fontFamily="Arial, sans-serif",n.style.fontSize="14px",n.style.boxShadow="0 4px 12px rgba(0,0,0,0.5)",n.style.zIndex="99999",n.style.opacity="0",n.style.transition="opacity 0.5s ease",e.appendChild(n),requestAnimationFrame(()=>{n.style.opacity="1"}),setTimeout(()=>{n.style.opacity="0",n.addEventListener("transitionend",()=>{n.remove(),e.children.length===0&&e.remove()},{once:!0})},4e3)}function Ee(o){let e=document.location.href;["pushState","replaceState"].forEach(n=>{let t=history[n];history[n]=function(){let s=t.apply(this,arguments);return e!==document.location.href&&(e=document.location.href,o()),s}}),window.addEventListener("popstate",()=>{e!==document.location.href&&(e=document.location.href,o())})}var Ce,we,ie=h(()=>{Ce=Promise.resolve().then(()=>(M(),L)),we=[{url:"https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b/central",modulo:()=>Promise.resolve().then(()=>(P(),B)).then(o=>o.centralDeAcoes()),aviso:"Script inicializado"},{url:"https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b",modulo:()=>Promise.resolve().then(()=>(oe(),te)).then(o=>o.exibirMenuMonitores()),aviso:"Script inicializado"}];Ee(ne)});var Ie=se(()=>{document.addEventListener("keydown",o=>{o.ctrlKey&&o.shiftKey&&o.code==="KeyE"&&(o.preventDefault(),console.log("Atalho acionado!"),Promise.resolve().then(()=>(ie(),re)).then(e=>e.verificarERodarModulo()).catch(e=>{console.error("Falha ao carregar m\xF3dulo:",e)}))});typeof GM_registerMenuCommand<"u"&&GM_registerMenuCommand("Mostrar Toast EXBR",k);function k(){let o=document.getElementById("exbr-toast");o&&o.remove();let e=document.createElement("div");e.id="exbr-toast",e.innerHTML=`
      <button aria-label="Fechar" title="Fechar" style="
        position:absolute;
        top:8px;
        right:10px;
        background:transparent;
        border:none;
        color:#bbb;
        font-size:16px;
        line-height:16px;
        cursor:pointer;
        padding:0;
      ">\xD7</button>

      <div style="margin-bottom:6px;">
        <strong>Extens\xE3o carregada</strong>
      </div>

      <div style="font-size:13px; line-height:1.4; margin-bottom:8px; color:#ccc;">
        O script da extens\xE3o s\xF3 funciona em:
        <br>
        \u279D <a href="https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b/central" class="toast-link">Central de a\xE7\xF5es</a>
        <br>
        \u279D <a href="https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b" class="toast-link">Geral</a>
      </div>

      <div style="display:flex; align-items:center; gap:8px;">
        <span style="font-size:18px;">\u26A1</span>
        <span><strong>Atalho:</strong> Pressione <kbd>CTRL</kbd> + <kbd>SHIFT</kbd> + <kbd>E</kbd></span>
      </div>
    `,Object.assign(e.style,{position:"fixed",bottom:"20px",left:"20px",padding:"14px 18px",background:"rgba(25,25,25,0.95)",color:"#f1f1f1",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontSize:"14px",fontFamily:"Segoe UI, Arial, sans-serif",zIndex:"2147483647",boxShadow:"0 4px 12px rgba(0,0,0,0.6)",userSelect:"none",opacity:"0",transform:"translateY(8px)",transition:"opacity .3s ease, transform .3s ease"}),document.body.appendChild(e),e.querySelectorAll("kbd").forEach(l=>{Object.assign(l.style,{background:"#333",border:"1px solid #555",borderRadius:"4px",padding:"2px 6px",fontSize:"12px",fontWeight:"bold",boxShadow:"inset 0 -1px 0 rgba(0,0,0,0.5)"})}),e.querySelectorAll(".toast-link").forEach(l=>{Object.assign(l.style,{color:"#4dabf7",textDecoration:"none",fontWeight:"bold",cursor:"pointer"}),l.addEventListener("mouseenter",()=>l.style.textDecoration="underline"),l.addEventListener("mouseleave",()=>l.style.textDecoration="none"),l.addEventListener("click",c=>{c.preventDefault(),window.location.href=l.getAttribute("href")})});let n=e.querySelector("button");n.addEventListener("mouseenter",()=>n.style.color="#fff"),n.addEventListener("mouseleave",()=>n.style.color="#bbb"),n.addEventListener("click",l=>{l.stopPropagation(),r()}),requestAnimationFrame(()=>{e.style.opacity="1",e.style.transform="translateY(0)"});let t;function s(){t=setTimeout(r,5e3)}function a(){clearTimeout(t)}e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",s),s();function r(){a(),e.style.opacity="0",e.style.transform="translateY(8px)",setTimeout(()=>e.remove(),300)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",k):k()});Ie();})();

(()=>{var me=Object.defineProperty;var b=(n,t)=>()=>(n&&(t=n(n=0)),t);var fe=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),x=(n,t)=>{for(var o in t)me(n,o,{get:t[o],enumerable:!0})};var z={};x(z,{inserirBadgeNavegacao:()=>be});function be(n=6e4){let t="body > div > section > div > div.flex.items-center.gap-4 > button.inline-flex.items-center.justify-center.whitespace-nowrap.font-medium.transition-colors.focus-visible\\:outline-none.focus-visible\\:ring-1.focus-visible\\:ring-ring.disabled\\:pointer-events-none.disabled\\:opacity-50.border.border-input.bg-background.shadow-sm.hover\\:bg-accent.hover\\:text-accent-foreground.h-8.rounded-md.px-3.text-xs";function o(r){let l=document.getElementById("exbr-div-info");if(!l){l=document.createElement("div"),l.id="exbr-div-info",Object.assign(l.style,{display:"flex",alignItems:"center",gap:"6px",position:"absolute",padding:"0px 9px",backgroundColor:"#080809",color:"#fff",border:"1px solid rgb(39,39,39)",fontSize:".75rem",borderRadius:"5px",height:`${r.offsetHeight}px`,minWidth:"80px",cursor:"pointer"});let i=document.createElement("img");i.src="https://www.habbo.com.br/habbo-imaging/badge/b10114s36044s40114s43114s17014328b05c552e870a455a7f2be1f8ad914.gif",Object.assign(i.style,{width:"14px",height:"14px"});let s=document.createElement("div");s.textContent="|",Object.assign(s.style,{color:"rgb(120,120,120)",fontWeight:"bold"});let m=document.createElement("div");m.id="exbr-div-text",Object.assign(m.style,{whiteSpace:"nowrap"}),l.appendChild(i),l.appendChild(s),l.appendChild(m),r.parentElement.style.position="relative",r.parentElement.appendChild(l)}return l}async function e(){let r=document.querySelector(t);if(!r)return;let l=o(r),i=l.querySelector("#exbr-div-text");try{let d=(await(await fetch(ye,{headers:he})).json()).length||0,u=d>100?"99+":d;i.textContent=`Pendentes: ${u}`,l.style.top=`${r.offsetTop+(r.offsetHeight/2-l.offsetHeight/2)}px`,l.style.left=`${r.offsetLeft-120}px`;let p=document.getElementById("exbr-tooltip");p||(p=document.createElement("div"),p.id="exbr-tooltip",p.style.position="fixed",p.style.background="#111",p.style.color="#fff",p.style.padding="4px 8px",p.style.fontSize="12px",p.style.borderRadius="4px",p.style.boxShadow="0 2px 6px rgba(0,0,0,0.4)",p.style.whiteSpace="nowrap",p.style.zIndex="9999",p.style.display="none",document.body.appendChild(p)),l.onmouseenter=f=>{p.textContent=`${d} a\xE7\xF5es n\xE3o aceitas na central`,p.style.display="block"},l.onmousemove=f=>{let h=f.clientY+12,k=f.clientX+12,I=p.getBoundingClientRect();k+I.width>window.innerWidth&&(k=f.clientX-I.width-12),h+I.height>window.innerHeight&&(h=f.clientY-I.height-12),p.style.top=h+"px",p.style.left=k+"px"},l.onmouseleave=()=>{p.style.display="none"},l.onclick=()=>{window.location.href="https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b/central"}}catch(s){console.error("Erro ao buscar dados:",s)}}function c(){document.querySelector(t)&&(e(),setInterval(e,n),a.disconnect())}let a=new MutationObserver(c);a.observe(document.body,{childList:!0,subtree:!0}),c()}var ye,he,_=b(()=>{ye="https://supabase.exbrhabbo.com/rest/v1/clusters_reports?select=*%2Cmember%3Aenrollments%21clusters_reports_member_fkey%28id%2Cnickname%29%2Creport_model%3Acluster_report_models%28*%29%2Caccepted_by%3Aenrollments%21clusters_reports_accepted_by_fkey%28id%2Cnickname%29&order=created_at.desc&accepted=is.null&cluster=eq.e34ee431-8e67-456d-8216-fce1b8a9a60b&offset=0&limit=100",he={apikey:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"}});var j={};x(j,{criarNotificacao:()=>D});function D(){let n=new Date,t=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),e=document.createElement("div");e.innerHTML=`
    <div style="
      display: flex;
      align-items: center;
      gap: 10px;
    ">
      <span style="font-size:18px;">\u26A1</span>
      <span style="font-weight:500;">
        Extens\xE3o atualizada \xE0s ${t}:${o}
      </span>
    </div>
  `,e.style.position="fixed",e.style.bottom="20px",e.style.left="20px",e.style.padding="12px 18px",e.style.background="rgba(20,20,20,0.95)",e.style.color="white",e.style.borderRadius="12px",e.style.fontFamily="Arial, sans-serif",e.style.fontSize="14px",e.style.boxShadow="0 4px 12px rgba(0,0,0,0.5)",e.style.zIndex="99999",e.style.opacity="0",e.style.transition="opacity 0.5s ease",document.body.appendChild(e),console.log("Aviso da extens\xE3o."),setTimeout(()=>{e.style.opacity="1"},50),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),500)},5e3)}var J=b(()=>{D()});var R={};x(R,{mostrarRelatoriosAceitos:()=>q,relatoriosAceitosMonitores:()=>ve});async function ve(n){if(!n)return console.warn("NickMonitor n\xE3o informado."),null;let t=encodeURIComponent(`%${n}%`),o=xe.replace("%25",t);try{let e=await fetch(o,{method:"GET",headers:{apikey:N,Authorization:$,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${e.status} ${e.statusText}`);let c=await e.json();return c.length?(console.log("ID do primeiro resultado:",c[0].id),await q(c[0].id),c[0].id):(console.log("Nenhum resultado encontrado para:",n),null)}catch(e){return console.error("Erro ao buscar dados:",e),null}}async function q(n){if(!n){console.warn("memberId n\xE3o informado.");return}let t=document.querySelector("#relatoriosAceitos");if(!t){console.warn("Div #relatoriosAceitos n\xE3o encontrada.");return}t.innerHTML="";let o=ge+n;try{let e=await fetch(o,{method:"GET",headers:{apikey:N,Authorization:$,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${e.status} ${e.statusText}`);let c=await e.json();if(!c.length){t.innerHTML="<p>Nenhum relat\xF3rio encontrado.</p>";return}let a=new Date,r=new Date;r.setDate(a.getDate()-2);let l=c.filter(i=>{if(!i.created_at||i.accepted!==!0&&i.accepted!==!1)return!1;let s=new Date(i.created_at);return s>=r&&s<=a});if(!l.length){t.innerHTML="<p>Nenhum relat\xF3rio recente encontrado.</p>";return}l.forEach(i=>{let s=document.createElement("div");s.style.border="1px solid #282828",s.style.padding="8px",s.style.marginBottom="10px",s.style.borderRadius="5px";let m=i.accepted?"Aprovado":"Reprovado",d=i.accepted?" #34d399":" #ef4444",u="Sem data";i.created_at&&(u=new Date(i.created_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}));let p=`
        <p style="display: flex; justify-content: space-between">
          <span>${i.report_model?.name??"N/A"} - ${u}</span>
          <span style="color:${d};">${m}</span>
        </p>

        <p style="color: #a1a1aa; display: flex; justify-content: space-between">
          <span>${i.member?.nickname??"N/A"}</span>
          <span>Aceito por ${i.accepted_by?.nickname??"N/A"}</span>
        </p>
      `;i.reason&&i.reason.trim()!==""&&(p+=`<p style="color: #a1a1aa;">Motivo: ${i.reason}</p>`),p+=`<p style="margin-top: 3px;">${i.report??"N/A"}</p>`,s.innerHTML=p,t.appendChild(s)})}catch(e){console.error("Erro ao buscar relat\xF3rios aceitos:",e),t.innerHTML='<p style="color:red;">Erro ao carregar os relat\xF3rios.</p>'}}var xe,ge,N,$,B=b(()=>{xe="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",ge="https://supabase.exbrhabbo.com/rest/v1/clusters_reports?select=*,member:enrollments!clusters_reports_member_fkey(id,nickname),report_model:cluster_report_models(*),accepted_by:enrollments!clusters_reports_accepted_by_fkey(id,nickname)&order=created_at.desc&or=(accepted.eq.true,accepted.eq.false,accepted.is.null)&cluster=eq.e34ee431-8e67-456d-8216-fce1b8a9a60b&member=eq.",N="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",$="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var Y={};x(Y,{relatoriosTreinadores:()=>Ee});async function Ie(n){let t=we+n;try{let o=await fetch(t,{method:"GET",headers:{apikey:P,Authorization:X,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Erro ao buscar relat\xF3rios: ${o.status} ${o.statusText}`);let e=await o.json();console.log("Relat\xF3rios encontrados:",e);let c=document.querySelector("#informacoes-relatorios > div"),a=document.querySelector("#relatorios");return a&&a.remove(),a=document.createElement("div"),a.id="relatorios",a.style.display="flex",a.style.flexDirection="column",a.style.flexWrap="nowrap",a.style.gap="5px",c.appendChild(a),e.forEach((r,l)=>{let i="";r.error&&(i+=' <span style="color:#ef4444;">(Erro)</span>'),r.trainee_report&&(i+=' <span style="color:#fbbf24;">(Teste)</span>');let s=r.accepted_by!==null,m=s?`aceito por ${r.accepted_by.nickname}${i}`:"Pendente",d=document.createElement("div");d.className="border px-2",d.setAttribute("data-state","closed"),d.setAttribute("data-orientation","vertical"),d.innerHTML=`
        <h3 data-orientation="vertical" data-state="closed" class="flex">
          <button type="button" aria-controls="radix-${l}" aria-expanded="false" data-state="closed" data-orientation="vertical"
            class="flex flex-1 items-center justify-between text-sm font-medium transition-all hover:underline py-2" data-radix-collection-item="">
            <span>
              ${r.type?.name||"Tipo inv\xE1lido"}
              <span class="ml-2 text-muted-foreground">${m}</span>
            </span>
            <span class="ml-auto mr-2 block size-2 rounded-full" id="bolinha-${l}"></span>
            <svg width="15" height="15" viewBox="0 0 15 15" fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="size-4 shrink-0 text-muted-foreground transition-transform duration-200">
              <path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z"
                fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
            </svg>
          </button>
        </h3>
        <div id="radix-${l}" class="pb-4 pt-0 relative space-y-2" hidden>
          <div style="display: flex; flex-direction: column;">

              <span class="text-sm text-muted-foreground">Respons\xE1vel: ${r.responsible?.nickname||"Desconhecido"}</span>
              <span class="text-sm text-muted-foreground">Treinador: ${r.handler?.nickname||"Desconhecido"}</span>
              <span class="text-sm text-muted-foreground">Auxiliar: ${r.secondary?.nickname||"Desconhecido"}</span>

          </div>
          <div>
            <p class="text-sm text-muted-foreground">Data de cria\xE7\xE3o: ${r.created_at?new Date(r.created_at).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"}</p>
          </div>

          <p class="text-sm text-muted-foreground" style="margin-top: 0px;">Treinados: ${r.students?.join(", ")||"N/A"}</p>

          <section class="space-y-3 rounded border px-1 py-2">
            <h3 class="font-semibold leading-none tracking-tight">Reprovados</h3>
            ${(r.failed&&r.failed.length>0?r.failed:[{}]).map(v=>`
                <div>
                  <p class="text-sm text-muted-foreground">Nickname: ${v.student||""}</p>
                  <p class="text-sm text-muted-foreground">Motivo: ${v.reason||""}</p>
                </div>
              `).join("")}
          </section>

          <p class="text-sm text-muted-foreground">Aprovados: ${r.approveds?.join(", ")||"N/A"}</p>
          <p style="color:#ef4444;" class="text-sm text-muted-foreground">${r.error_message||""}</p>
        </div>
      `,a.appendChild(d);let u=document.getElementById(`bolinha-${l}`);u.style.width="6pxpx",u.style.height="6pxpx",u.style.borderRadius="50%",u.style.backgroundColor=s?" #34d399":" #fbbf24";let p=d.querySelector("button"),f=d.querySelector(`#radix-${l}`);p.addEventListener("click",()=>{a.querySelectorAll("div[data-state]").forEach(h=>{h!==d&&(h.setAttribute("data-state","closed"),h.querySelector(`#radix-${Array.from(a.children).indexOf(h)}`).hidden=!0)});let v=f.hidden;f.hidden=!v,d.setAttribute("data-state",v?"open":"closed")})}),e}catch(o){console.error("Erro ao buscar relat\xF3rios:",o)}}async function Ee(n){if(!n)return console.warn("Nick do treinador n\xE3o encontrado."),null;let t=encodeURIComponent(`%${n}%`),o=Ce.replace("%25",t);try{let e=await fetch(o,{method:"GET",headers:{apikey:P,Authorization:X,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Erro na requisi\xE7\xE3o: ${e.status} ${e.statusText}`);let c=await e.json();if(!c.length)return console.log("Nenhum resultado encontrado para:",n),null;let a=c[0].id;return console.log("ID do treinador:",a),await Ie(a),a}catch(e){return console.error("Erro ao buscar dados:",e),null}}var Ce,we,P,X,W=b(()=>{Ce="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",we="https://supabase.exbrhabbo.com/rest/v1/reports?select=*%2Chandler%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Csecondary%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Cresponsible%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29%2Cbranch%3Abranches%28*%29%2Ctype%3Areport_types%28*%29%2Caccepted_by%28id%2Cnickname%2Crole%3Aroles%28id%2Cname%29%29&order=created_at.desc&offset=0&limit=25&branch=eq.895039c4-2473-494c-b293-5506e1d8152c&handler=eq.",P="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",X="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var U={};x(U,{centralDeAcoes:()=>ke});async function ke(){document.addEventListener("click",n=>{let t=n.target.closest("body > div > section > main > section > main > div > div.p-6.pt-0 > section > section > div.space-y-4 > div > div > button");if(!t)return;let e=document.querySelector("body > div.fixed.inset-0.z-50.bg-black\\/80[data-state='open']")?.nextElementSibling;if(!e){console.warn("Container da modal n\xE3o encontrado.");return}e.style.overflowY="hidden";let c=e.querySelector("button > svg");if(c?(c.style.position="absolute",c.style.right="-35px"):console.log("Bot\xE3o SVG n\xE3o encontrado dentro do container"),e.dataset.modificado==="true")return;e.dataset.modificado="true";let a=window.getComputedStyle(e);(a.position==="static"||!a.position)&&(e.style.position="relative");let r=document.querySelector("#informacoes-relatorios");r||(r=document.createElement("div"),r.id="informacoes-relatorios",r.style.width="62%",r.style.overflowY="scroll",r.style.scrollbarWidth="none",r.style.msOverflowStyle="none",r.style.height="232px",e.appendChild(r)),r.innerHTML="";let l=document.createElement("div"),i=e.querySelector("textarea");i&&(i.style.width="unset"),l.style.width="100%",l.style.height="200px",r.appendChild(l);let s=document.querySelector("#relatoriosAceitos");if(s)s.isConnected||e.appendChild(s);else{s=document.createElement("div"),s.id="relatoriosAceitos",s.style.width="35%",s.style.height="438.9px",s.style.position="absolute",s.style.top="0",s.style.right="0",s.style.overflowY="scroll",s.style.scrollbarWidth="none",s.style.msOverflowStyle="none",s.style.padding="10px",s.style.boxSizing="border-box",s.style.zIndex="9999",s.innerHTML='<p style="font-size: 14px; font-weight: 400; text-align: center;">A\xE7\xF5es aceitas</p>';let u=document.createElement("style");u.textContent=`
        #relatoriosAceitos::-webkit-scrollbar {
          display: none;
        }
      `,document.head.appendChild(u)}s.parentElement!==e&&e.appendChild(s),Array.from(e.children).filter(u=>u!==r&&u!==s).forEach(u=>{u.style.marginRight="38%"}),e.style.setProperty("width","95vw","important"),e.style.setProperty("max-width","none","important"),e.style.setProperty("outline","none","important");let d=e.querySelector("p");d&&d.style.setProperty("font-size","15px"),Te(t)})}function Te(n){let t=n.closest("div.space-y-4 > div");if(!t)return;let o=Array.from(t.querySelectorAll("p")).find(r=>r.textContent.includes("Criado por"));if(!o)return;let e=o.textContent.trim(),c="Criado por ",a=e.includes(c)?e.substring(e.indexOf(c)+c.length).trim():null;console.log("Nick encontrado:",a),Ae.then(r=>r.relatoriosAceitosMonitores(a)).catch(console.error),Se.then(r=>r.relatoriosTreinadores(a)).catch(console.error)}var Ae,Se,F=b(()=>{Ae=Promise.resolve().then(()=>(B(),R)),Se=Promise.resolve().then(()=>(W(),Y))});var H,G,T,O,K=b(()=>{H="https://supabase.exbrhabbo.com/rest/v1/enrollments?select=*%2Crole%3Aroles%28id%2Cname%2Ctype%29%2Cinitials%3Ainitials%28id%2Cname%29%2Ccompany%3Acompanies%28id%2Cname%29%2Cstatus%3Astatus%28id%2Cname%29%2Cbranch%3Abranches%28id%2Cname%29%2Cpromoted_by%28*%29%2Clecture%3Alectures%28id%2Cname%29&nickname=ilike.%25",G="https://supabase.exbrhabbo.com/rest/v1/clusters_reports?select=*,member:enrollments!clusters_reports_member_fkey(id,nickname),report_model:cluster_report_models(*),accepted_by:enrollments!clusters_reports_accepted_by_fkey(id,nickname)&order=created_at.desc&accepted=is.true&cluster=eq.e34ee431-8e67-456d-8216-fce1b8a9a60b&member=eq.",T="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E",O="Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTcyODc0Njc2MCwiZXhwIjo0ODg0NDIwMzYwLCJyb2xlIjoiYW5vbiJ9.PfUXWWBShhau-OE27c8GbPuIP8p3afvItzxi0Xpel0E"});var se={};x(se,{exibirMenuMonitores:()=>te});async function te(){console.log("Lista de membros.");let n=document.querySelector("body > div > section > main > section > main > div > div.p-6.pt-0 > div > div.items-center.justify-between.space-y-2.lg\\:flex.lg\\:space-y-0 > div.flex.flex-1.flex-wrap.items-center.gap-2");if(n&&(n.style.justifyContent="space-between",!document.getElementById("identificador-datas"))){let t=document.createElement("div");t.id="identificador-datas",t.style.display="flex",t.style.alignItems="center",t.style.gap="12px",t.style.padding="0px 14px",t.style.borderRadius="6px",t.style.border="1px solid rgb(38 38 38)",t.style.fontSize="10px",t.style.color="rgb(161, 161, 161)",t.style.backgroundColor="#1e1e1e";let o=document.createElement("span");o.textContent="Data para fechamento:";let e=document.createElement("select");e.id="dia-fechamento",Object.assign(e.style,{padding:"4px 10px",borderRadius:"4px",border:"none",backgroundColor:"#1e1e1e",color:"white",fontWeight:"500",cursor:"pointer",minWidth:"60px"});let c=new Date,a=c.getFullYear(),r=c.getMonth(),l=new Date(a,r+1,0).getDate();for(let d=1;d<=l;d++){let u=document.createElement("option");u.value=d,u.textContent=d.toString().padStart(2,"0"),e.appendChild(u)}let i=localStorage.getItem("diaSelecionado");i?(e.value=i,g=i):g=e.value;let s=document.createElement("div");s.style.display="flex",s.style.alignItems="center";let m=document.createElement("button");m.title="Buscar",Object.assign(m.style,{cursor:"pointer",border:"none",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px",borderRadius:"4px",color:"rgb(161, 161, 161)",transition:"color 0.2s ease-in-out"}),m.onmouseenter=()=>m.style.color="white",m.onmouseleave=()=>m.style.color="rgb(161, 161, 161)",m.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          viewBox="0 0 24 24">
          <line x1="5" y1="12" x2="19" y2="12" />
          <polyline points="12 5 19 12 12 19" />
        </svg>
      `,m.onclick=()=>{let d=e.value;localStorage.setItem("diaSelecionado",d),g=d,localStorage.setItem("lupasAtivadas","true"),Z=!0,Oe(),V(),A&&A.disconnect(),Q()},e.addEventListener("change",()=>{let d=e.value;localStorage.setItem("diaSelecionado",d),g=d}),s.appendChild(m),t.appendChild(o),t.appendChild(e),t.appendChild(s),n.appendChild(t),Z&&(V(),Q())}}function Oe(){document.querySelectorAll("td.td-lupa-monitores").forEach(n=>n.remove())}function oe(n){if(!y){y=document.createElement("div"),y.id="div-flutuante-monitores",Object.assign(y.style,{position:"fixed",left:"50%",bottom:"3px",transform:"translate(-50%, -10%)",borderRadius:"6px",border:"1px solid rgb(38 38 38)",width:"98vw",backgroundColor:"rgb(0 0 0 / 60%)",color:"white",borderTop:"2px solid rgb(38 38 38)",padding:"12px",boxSizing:"border-box",overflowY:"auto",zIndex:9999,display:"flex",flexDirection:"row",gap:"20px",flexWrap:"wrap",position:"fixed"});let o=document.createElement("button");o.id="fechar-div-flutuante",o.textContent="\xD7",Object.assign(o.style,{position:"absolute",top:"8px",right:"16px",background:"transparent",border:"none",color:"white",fontSize:"24px",cursor:"pointer",fontWeight:"bold",lineHeight:"1"}),o.onclick=()=>{y.style.display="none"},y.appendChild(o);let e=document.createElement("div");e.id="conteudo-flutuante",e.style.width="100%",e.style.display="flex",e.style.gap="30px",y.appendChild(e),document.body.appendChild(y)}let t=y.querySelector("#conteudo-flutuante");t.innerHTML=n,y.style.display="flex"}function V(){if(!g)return;let n=t=>{let o=t.parentElement;if(!o)return;let e=t.nextElementSibling;if(e&&e.classList.contains("td-lupa-monitores"))return;let c=document.createElement("td");c.className="td-lupa-monitores",Object.assign(c.style,{width:"32px",textAlign:"center",verticalAlign:"middle",cursor:"pointer",padding:"4px"}),c.title=`A\xE7\xE3o com dia ${g}`,c.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          viewBox="0 0 24 24">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      `,c.addEventListener("click",async a=>{a.stopPropagation();let i=a.target.closest("tr")?.querySelector("td:nth-child(2)")?.textContent.trim();if(!i)return;let s=await ne(i),m=await re(s),d=ie(i,m);oe(d)}),o.insertBefore(c,e||null)};document.querySelectorAll("table").forEach(t=>{t.querySelectorAll("tbody tr td:nth-child(4)").forEach(n)})}function Q(){A=new MutationObserver(n=>{for(let t of n)t.addedNodes.forEach(o=>{if(o.nodeType===1&&o.matches("tr")){let e=o.querySelector("td:nth-child(4)");if(e){let c=e.nextElementSibling;if(c&&c.classList.contains("td-lupa-monitores"))return;let a=document.createElement("td");a.className="td-lupa-monitores",Object.assign(a.style,{width:"32px",textAlign:"center",verticalAlign:"middle",cursor:"pointer",padding:"4px"}),a.title=`A\xE7\xE3o com dia ${g}`,a.innerHTML=`
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              `,a.addEventListener("click",async r=>{r.stopPropagation();let s=r.target.closest("tr")?.querySelector("td:nth-child(2)")?.textContent.trim();if(!s)return;let m=await ne(s),d=await re(m),u=ie(s,d);oe(u)}),e.parentElement.insertBefore(a,c||null)}}})}),document.querySelectorAll("table").forEach(n=>{A.observe(n,{childList:!0,subtree:!0})})}async function ne(n){let t=`${H}${encodeURIComponent(n)}%25`,e=await(await fetch(t,{method:"GET",headers:{apikey:T,Authorization:O,"Content-Type":"application/json"}})).json();if(!e?.length)throw new Error("Membro n\xE3o encontrado");return e[0].id}async function re(n){let t=localStorage.getItem("diaSelecionado"),o=new Date().getFullYear(),e=String(new Date().getMonth()+1).padStart(2,"0"),a=new Date(`${o}-${e}-${t.padStart(2,"0")}T03:00:00Z`).toISOString(),r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),3,0,0).toISOString(),s=`${G}${n}&offset=0`;t&&(s+=`&created_at=gte.${a}&created_at=lte.${i}`);let d=await(await fetch(s,{method:"GET",headers:{apikey:T,Authorization:O,"Content-Type":"application/json"}})).json(),u={T1:[],T2:[],T3:[],T4:[],TOTAL:[]};return d.forEach(p=>{let f=p?.report_model?.name;f==="Treinamento B\xE1sico I"?u.T1.push(p):f==="Treinamento B\xE1sico II"?u.T2.push(p):f==="Treinamento Complementar I"?u.T3.push(p):f==="Treinamento Complementar II"&&u.T4.push(p),u.TOTAL.push(p)}),u}function ie(n,t){let o=`<h2>Relat\xF3rios de <strong>${n}</strong></h2>`;for(let e in t){let c=t[e];o+=`<div><strong>${e}</strong>: ${c.length}</div>`}return o+="</div>",o}function ee(){if(!C||!w)return;let n=Array.from(C.querySelectorAll("tr")),t=[...n].sort((e,c)=>{let a=e.querySelector("td:nth-child(4) div")?.textContent.trim()||"",r=c.querySelector("td:nth-child(4) div")?.textContent.trim()||"",l=E[a]!==void 0?E[a]:1/0,i=E[r]!==void 0?E[r]:1/0;return l-i}),o=!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e]){o=!0;break}o&&(w.disconnect(),t.forEach(e=>C.appendChild(e)),w.observe(C,{childList:!0,subtree:!1}))}var g,A,y,Z,Me,E,M,C,w,ae=b(()=>{K();g=null,A=null,y=null,Z=localStorage.getItem("lupasAtivadas")==="true";console.log("TESTE");Me=new MutationObserver(()=>{document.querySelector("body > div > section > main > section > main > div > div.p-6.pt-0 > div > div.items-center.justify-between.space-y-2.lg\\:flex.lg\\:space-y-0 > div.flex.flex-1.flex-wrap.items-center.gap-2")&&!document.getElementById("identificador-datas")&&te()});Me.observe(document.body,{childList:!0,subtree:!0});document.body.style.paddingBottom="60px";E={Ativo:0,"Semi-Ausente":1,Ausente:2,"Justificativa de Aus\xEAncia":3,Verifica\u00E7\u00E3o:4},M=null,C=document.querySelector("tbody"),w=null;C&&(w=new MutationObserver(n=>{M&&clearTimeout(M),M=setTimeout(()=>{ee()},100)}),w.observe(C,{childList:!0,subtree:!1}),ee())});var le={};x(le,{verificarERodarModulo:()=>ce});function ce(){let n=window.location.href,t=ze.filter(o=>n.startsWith(o.url)).sort((o,e)=>e.url.length-o.url.length)[0];t?(t.modulo(),console.log("\u2705 Rota encontrada:",t.url),t.aviso&&(_e(t.aviso),Le.then(o=>o.criarNotificacao()).catch(console.error))):console.log("\u26A0 Nenhum m\xF3dulo configurado para esta URL:",n)}function _e(n){let t=document.querySelector("#aviso-suspenso-container");t||(t=document.createElement("div"),t.id="aviso-suspenso-container",Object.assign(t.style,{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",fontFamily:"Arial, sans-serif"}),document.body.appendChild(t)),t.innerHTML="";let o=document.createElement("div");o.textContent=n,o.style.padding="12px 18px",o.style.background="rgba(20,20,20,0.95)",o.style.color="white",o.style.borderRadius="12px",o.style.fontFamily="Arial, sans-serif",o.style.fontSize="14px",o.style.boxShadow="0 4px 12px rgba(0,0,0,0.5)",o.style.zIndex="99999",o.style.opacity="0",o.style.transition="opacity 0.5s ease",t.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1"}),setTimeout(()=>{o.style.opacity="0",o.addEventListener("transitionend",()=>{o.remove(),t.children.length===0&&t.remove()},{once:!0})},4e3)}function De(n){let t=document.location.href;["pushState","replaceState"].forEach(o=>{let e=history[o];history[o]=function(){let c=e.apply(this,arguments);return t!==document.location.href&&(t=document.location.href,n()),c}}),window.addEventListener("popstate",()=>{t!==document.location.href&&(t=document.location.href,n())})}var Le,ze,de=b(()=>{Le=Promise.resolve().then(()=>(J(),j)),ze=[{url:"https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b/central",modulo:()=>Promise.resolve().then(()=>(F(),U)).then(n=>n.centralDeAcoes()),aviso:"Script inicializado"},{url:"https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b",modulo:()=>Promise.resolve().then(()=>(ae(),se)).then(n=>n.exibirMenuMonitores()),aviso:"Script inicializado"}];De(ce)});var Ne=fe(()=>{var je=document.querySelector("body > div.relative.min-h-screen.lg\\:flex > section > div > div.flex.items-center.gap-3 > button");je.addEventListener("click",()=>{let n=document.querySelector("body > div.relative.min-h-screen.lg\\:flex > div"),t=document.querySelector("#radix-\\:R1cumkq\\: > nav > ul > li:nth-child(4) > div.hidden");n.hasAttribute("data-state","open")?(t.style.display="flex",t.style.justifyContent="flex-start"):t.style.justifyContent="center"});var ue=Promise.resolve().then(()=>(_(),z));function Je(){return document.querySelector("#cf-chl-widget-jqy2i_response")!==null||document.querySelector("#challenge-success-text")!==null||document.body.innerText.includes("Confirme que voc\xEA \xE9 humano")||document.body.innerText.includes("precisa revisar a seguran\xE7a da sua conex\xE3o")}function S(n){let t=setInterval(()=>{Je()||(clearInterval(t),n())},500)}document.addEventListener("keydown",n=>{n.ctrlKey&&n.shiftKey&&n.code==="KeyE"&&(n.preventDefault(),console.log("Atalho acionado!"),S(()=>{Promise.resolve().then(()=>(de(),le)).then(t=>t.verificarERodarModulo()).catch(t=>{console.error("Falha ao carregar m\xF3dulo:",t)})}))});typeof GM_registerMenuCommand<"u"&&GM_registerMenuCommand("Mostrar Toast EXBR",()=>{S(L)});function pe(){let n=document.getElementById("exbr-loader");n&&n.remove();let t=document.createElement("div");t.id="exbr-loader",t.innerHTML=`
    <div style="display:flex; align-items:center; gap:8px;">
      <div class="loader" style="
        width:14px; height:14px; border:2px solid #999; border-top:2px solid #4dabf7;
        border-radius:50%; animation: spin 1s linear infinite;
      "></div>
      <span style="font-size:13px; color:#ccc;">Carregando extens\xE3o...</span>
    </div>
  `,Object.assign(t.style,{position:"fixed",bottom:"20px",left:"20px",padding:"10px 14px",background:"rgba(25,25,25,0.95)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",fontFamily:"Segoe UI, Arial, sans-serif",zIndex:"2147483647",boxShadow:"0 4px 10px rgba(0,0,0,0.5)",opacity:"0",transform:"translateY(8px)",transition:"opacity .3s ease, transform .3s ease"}),document.body.appendChild(t),requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"});let o=document.createElement("style");return o.textContent=`
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  `,document.head.appendChild(o),t}function L(){let n=document.getElementById("exbr-loader");n&&n.remove();let t=document.getElementById("exbr-toast");t&&t.remove(),ue.then(i=>i.inserirBadgeNavegacao()).catch(console.error);let o=document.createElement("div");o.id="exbr-toast",o.innerHTML=`
      <button aria-label="Fechar" title="Fechar" style="
        position:absolute;
        top:8px;
        right:10px;
        background:transparent;
        border:none;
        color:#bbb;
        font-size:16px;
        line-height:16px;
        cursor:pointer;
        padding:0;
      ">\xD7</button>

      <div style="margin-bottom:6px;">
        <strong>Extens\xE3o carregada</strong>
      </div>

      <div style="font-size:13px; line-height:1.4; margin-bottom:8px; color:#ccc;">
        O script da extens\xE3o s\xF3 funciona em:
        <br>
        \u279D <a href="https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b/central" class="toast-link">Central de a\xE7\xF5es</a>
        <br>
        \u279D <a href="https://ofc.exbrhabbo.com/externos/e34ee431-8e67-456d-8216-fce1b8a9a60b" class="toast-link">Geral</a>
      </div>

      <div style="display:flex; align-items:center; gap:8px;">
        <span style="font-size:18px;">\u26A1</span>
        <span><strong>Atalho para injetar o script:</strong><br> Pressione <kbd>CTRL</kbd> + <kbd>SHIFT</kbd> + <kbd>E</kbd></span>
      </div>
    `,Object.assign(o.style,{position:"fixed",bottom:"20px",left:"20px",padding:"14px 18px",background:"rgba(25,25,25,0.95)",color:"#f1f1f1",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontSize:"14px",fontFamily:"Segoe UI, Arial, sans-serif",zIndex:"2147483647",boxShadow:"0 4px 12px rgba(0,0,0,0.6)",userSelect:"none",opacity:"0",transform:"translateY(8px)",transition:"opacity .3s ease, transform .3s ease"}),document.body.appendChild(o),o.querySelectorAll("kbd").forEach(i=>{Object.assign(i.style,{background:"#333",border:"1px solid #555",borderRadius:"4px",padding:"2px 6px",fontSize:"12px",fontWeight:"bold",boxShadow:"inset 0 -1px 0 rgba(0,0,0,0.5)"})}),o.querySelectorAll(".toast-link").forEach(i=>{Object.assign(i.style,{color:"#4dabf7",textDecoration:"none",fontWeight:"bold",cursor:"pointer"}),i.addEventListener("mouseenter",()=>i.style.textDecoration="underline"),i.addEventListener("mouseleave",()=>i.style.textDecoration="none"),i.addEventListener("click",s=>{s.preventDefault(),window.location.href=i.getAttribute("href")})});let e=o.querySelector("button");e.addEventListener("mouseenter",()=>e.style.color="#fff"),e.addEventListener("mouseleave",()=>e.style.color="#bbb"),e.addEventListener("click",i=>{i.stopPropagation(),l()}),requestAnimationFrame(()=>{o.style.opacity="1",o.style.transform="translateY(0)"});let c;function a(){c=setTimeout(l,5e3)}function r(){clearTimeout(c)}o.addEventListener("mouseenter",r),o.addEventListener("mouseleave",a),a();function l(){r(),o.style.opacity="0",o.style.transform="translateY(8px)",setTimeout(()=>o.remove(),2e3)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{pe(),ue.then(n=>n.relatoriosAceitosMonitores()).catch(console.error),S(L)}):(pe(),S(L))});Ne();})();
